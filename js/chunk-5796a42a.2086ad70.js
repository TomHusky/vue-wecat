(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5796a42a"],{"04a2":function(t,e,n){"use strict";n("0a15")},"0a15":function(t,e,n){},"310c":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));var i=n("6b6c"),a=function(t){var e={username:t};return Object(i["a"])({url:"/friend/listFriendInfo",params:e,method:"get"})},s=function(t){return Object(i["d"])({url:"/friend/applyAddFriend",data:t})},r=function(t){return Object(i["d"])({url:"/friend/handleFriendApply",data:t})}},3378:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wechat"}},[n("div",{staticClass:"sidebar"},[n("MyCard")],1),n("div",{staticClass:"main"},[n("div",{staticClass:"systemBottom"},[n("i",{staticClass:"icon iconfont icon-window-ding"}),n("i",{staticClass:"icon iconfont icon-window-min"}),n("i",{staticClass:"icon iconfont icon-window-max"}),n("i",{staticClass:"icon iconfont icon-close close",on:{click:t.exit}})]),n("router-view")],1),n("HeadMenu",{staticClass:"right-menu",attrs:{id:"friendHeadMenu",refId:"friendHeadMenu"}})],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.headMenu.visible,expression:"headMenu.visible"}],staticClass:"headmenu",style:{left:t.headMenu.clientX+"px",top:t.headMenu.clientY+"px"}},[n("div",{staticClass:"esInfo"},[n("div",{staticClass:"left"},[n("div",{staticClass:"people"},[n("div",{staticClass:"nickname"},[t._v(t._s(t.user.nickname))]),n("div",{class:[1===t.user.sex?"gender-male":"gender-female"]}),n("div",{staticClass:"infoItem"},[n("div",{staticClass:"item wxid"},[n("div",{staticClass:"lable",staticStyle:{width:"50px"}},[t._v("微信号:")]),n("div",{staticClass:"lable",staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.user.wxid))])])])])]),n("div",{staticClass:"right"},[n("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:t.user.avatar}})])]),n("div",{staticClass:"division"}),n("div",{staticClass:"infoItem"},[t.headMenu.self||null==t.user.remark?t._e():n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("备 注")]),n("span",{staticClass:"value editText",attrs:{contentEditable:!t.headMenu.self}},[t._v(t._s(t.user.remark))])]),2==t.headMenu.type?n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("群昵称")]),n("span",{staticClass:"value"},[t._v("白云三手房东")])]):t._e(),n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("地 区")]),n("span",{staticClass:"value"},[t._v(t._s(t.user.area))])]),t.headMenu.self||null==t.user.origin?t._e():n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("来 源")]),n("span",{staticClass:"value"},[t._v(t._s(t.user.origin))])]),null!=t.user.label?n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("标 签")]),n("span",{staticClass:"value"},[t._v(t._s(t.user.label))])]):t._e()]),n("div",{staticClass:"signature",class:{editText:t.headMenu.self},attrs:{contentEditable:t.headMenu.self},on:{blur:function(e){return t.updateSignature(e)}}},[t._v(" "+t._s(t.user.signature)+" ")]),t._m(0)])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"button"},[i("img",{attrs:{width:"85px",height:"35px",src:n("5b3a")}})])}],c=n("5530"),o=n("2f62"),u={name:"HeadMenu",props:{refId:{type:String,default:"headMenu"},offset:{type:Object,default:function(){return{clientX:0,clientY:0}}}},data:function(){return{}},computed:Object(c["a"])(Object(c["a"])({},Object(o["d"])({headMenu:function(t){return t.system.headMenu}})),{},{user:function(){return this.headMenu.self?this.$store.state.user.info:(this.headMenu,this.$store.getters["system/getHeadMenuInfo"])}}),mounted:function(){document.addEventListener("click",this.closeMenu)},destroyed:function(){document.removeEventListener("click",this.closeMenu)},methods:{closeMenu:function(t){var e=document.getElementById(this.refId);e&&(e.contains(t.target)||(this.headMenu.visibleIng?this.headMenu.visibleIng=!1:(this.headMenu.visible=!1,this.$store.commit("system/setHeadMenu",this.headMenu))))},updateSignature:function(t){}}},d=u,l=(n("445b"),n("2877")),f=Object(l["a"])(d,s,r,!1,null,"c1d41206",null),h=f.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"mycard selectNone"},[n("header",[n("img",{staticClass:"avatar",attrs:{id:"headMenu",src:t.user.avatar},on:{click:function(e){return e.preventDefault(),t.openMenu(e)}}})]),n("div",{staticClass:"navbar",on:{click:t.clearSearch}},[n("router-link",{staticClass:"icon iconfont icon-msg",attrs:{to:"/chat"}},[t.getTotalNewMsgs>0?n("Badge",{attrs:{count:t.getTotalNewMsgs,overflowCount:99,width:16,height:16}}):t._e()],1),n("router-link",{staticClass:"icon iconfont icon-friend",attrs:{to:"/friend"}},[t.getNewFriendNums>0?n("Badge",{attrs:{count:t.getNewFriendNums,overflowCount:99,width:16,height:16}}):t._e()],1),n("router-link",{staticClass:"icon iconfont icon-collection",attrs:{to:"/game"}})],1),t._m(0)])},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("i",{staticClass:"icon iconfont icon-san"})])}],v=n("ff9f"),g={components:{Badge:v["a"]},computed:Object(c["a"])(Object(c["a"])({},Object(o["c"])({getNewFriendNums:"friend/getNewFriendNums",getTotalNewMsgs:"chat/getTotalNewMsgs"})),{},{user:function(){return this.$store.state.user.info}}),data:function(){return{}},methods:{clearSearch:function(){this.$store.dispatch("system/search","")},openMenu:function(t){var e={clientX:t.clientX,clientY:t.clientY,self:!0,visible:!0,visibleIng:!0};this.$store.commit("system/setHeadMenu",e)}}},w=g,b=(n("04a2"),Object(l["a"])(w,m,p,!1,null,"55f6b70e",null)),C=b.exports,y=(n("4328"),n("4360")),O=n("310c");function M(){var t=y["a"].state;Object(O["c"])(t.user.info.username).then((function(t){0==t.code&&y["a"].commit("friend/addFriendList",t.data)})).catch((function(t){}))}var j=n("6b6c"),x=function(t,e){if(document.hidden){var n={body:e.msgContent,silent:!1,icon:e.avatar,sound:"/static/mp3/newMsg.mp3"},i=new Notification(e.remark,n);i.onclick=function(){window.focus(),notify.close()}}};function k(t){var e=t;y["a"].dispatch("chat/receiveMessage",e.data);var n=y["a"].getters["friend/selectedFriendByUsername"](e.data.username),i={avatar:n.avatar,nickname:n.nickname,remark:null==n.remark?n.nickname:n.remark,msgContent:e.data.msgContent};x(this,i)}function N(t){var e=t.data;y["a"].dispatch("friend/addFriend",e)}function _(t){var e=t.data;if(y["a"].dispatch("friend/addNewFriend",e),1==e.length){var n={avatar:e[0].avatar,nickname:e[0].nickname,remark:null==e[0].remark?e[0].nickname:e[0].remark,msgContent:e[0].info};x(this,n)}}var A={chatMsg:k,friendAddFriend:N,friendNewFriend:_},E=n("c276"),H=n("2a2c"),I={components:{MyCard:C,HeadMenu:h},data:function(){return{moveDataelse:{x:null,y:null}}},created:function(){M(),this.allowNotification()},beforeDestroy:function(){Object(H["b"])()},beforeMount:function(){Object(E["a"])()&&(Object(H["b"])(),Object(H["a"])("ws://"+Object(j["c"])()+"/websocket",Object(E["a"])(),this.wsOpen,A,this.wsError))},mounted:function(){var t=this;t.updateAppPosition(document.documentElement.clientWidth,document.documentElement.clientHeight),window.onresize=function(){return function(){window.fullHeight=document.documentElement.clientHeight,window.fullWidth=document.documentElement.clientWidth,t.$store.commit("system/setWindowWidth",window.fullWidth),t.$store.commit("system/setwindowHeight",window.fullHeight),t.updateAppPosition(window.fullWidth,window.fullHeight)}()}},methods:{allowNotification:function(){if("Notification"in window){var t=Notification.permission;"granted"!==t&&Notification.requestPermission((function(t){"granted"!==t&&alert("无法提示新消息！")}))}else alert("浏览器不支持消息通知")},updateAppPosition:function(t,e){var n=document.getElementById("wechat");n.style.left=(t-n.offsetWidth)/2+"px",n.style.top=(e-n.offsetHeight)/2+"px"},wsOpen:function(){this.$store.commit("system/setNetwork",!0)},wsError:function(){this.$store.commit("system/setNetwork",!1)},exit:function(){Object(j["b"])()}}},P=I,S=(n("ea67"),Object(l["a"])(P,i,a,!1,null,"1e6d25ea",null));e["default"]=S.exports},"445b":function(t,e,n){"use strict";n("c92e")},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");var i=n("ade3");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"5b3a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFUAAAAjCAYAAADljkaGAAADYElEQVRoge2ZzSt0URzHv/N4iBp5KQphQVnIS423hT/AwoYlYa28TykpC2sbirJjK2VpJbIhLxFDXldCIi9ZEM3cZ76nTB6PnnHuOTcc91O3uTP3/r5z+t5zfr9zz/FYYeCilV+f3QATcU11AK2m7u3t6ZT7tmgzNRAIYGxsDPv7+7okvy1aTKWh4+PjuLu7w8jIyI839reqwIuhXV1dGBwcREdHhzCWnwUFBTraqMzJyQm2traws7ODy8tL3N7eit+Tk5ORlpaGwsJCFBcXIzs7W8v/eVSmVK8NzcvLQ0tLCyYnJ0VPpbHd3d3Iz8/X0lA7HB0dYWZmBmdnZygvLxfmZWRkCDMJzT0/Pxdmr66uIjMzE3V1deptthRoa2uzwg2PfG9ubo6ch4uW5ff7VeRtEwqFrKmpKSv8UK3FxUUrGAxGjeE9vJcxjKWGXZRMfW0oeW0qOTw8VJG3Bc0ZGhoSx/39vXQ8Y17iP/Iw3kOpUHHI/4/PGPpMR7Gxsejp6YHX65WOZwxjqUEtO0gVKubMtzCH6rpfleXlZZE/BwYG4PF4bOswtrW1VRRealZVVckJyHTrt8Nb93UVnp6erM7Ozn9SkgrUoia1ZTDmNXVzcxNZWVlRU5IM1KLmxsaGVJwxpq6srMgP0w9ATU63ZDDGVE7wnSiM1KS2DFpNdbIIReP6+joyqdcJNaktgzE9NVwf8Pz87Ih2TEyM1P3GmMoexVdO3bCXpqSkSMUYYypz3+npqXbdg4MD5ObmSsUYY2plZSUWFha06y4tLaGiokIqxhhTS0tLRe5bW1vTprm7u4ubmxuxLCiDMaaS+vp6TE9Pa9F6eHjAxMQEGhsbf26hInFxceJQhbOI4eFhFBUViREgi/LK/1eCb1VlZWVKGqz2o6OjSE9PR1NTky0No0xdX19HX1+fOOdbEPNrQkICqquroy4DPj4+Ym5uDrOzs6itrUVNTY3tdhhjKqc+HLbz8/PCXOLz+cSeVG9vr9hK4cEemJqaKvIkNyovLi7E/tX29jZKSkrQ398vtlxUkDb1vTXSrwALCw2Lj49He3s7cnJy/rrG1HB8fCwWR66urhAKhZCYmBjZ+GtoaEBSUpKWtiht/Lm8j1HV/6vgmuoArqkO4JrqAK6pDuCa6gB/AA7z7Q1BNLMBAAAAAElFTkSuQmCC"},8935:function(t,e,n){"use strict";n("eacc")},c92e:function(t,e,n){},dbb4:function(t,e,n){var i=n("23e7"),a=n("83ab"),s=n("56ef"),r=n("fc6a"),c=n("06cf"),o=n("8418");i({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,i=r(t),a=c.f,u=s(i),d={},l=0;while(u.length>l)n=a(i,e=u[l++]),void 0!==n&&o(d,e,n);return d}})},e439:function(t,e,n){var i=n("23e7"),a=n("d039"),s=n("fc6a"),r=n("06cf").f,c=n("83ab"),o=a((function(){r(1)})),u=!c||o;i({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return r(s(t),e)}})},ea67:function(t,e,n){"use strict";n("f886")},eacc:function(t,e,n){},f886:function(t,e,n){},ff9f:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"badge",style:{width:t.getWidth+"px",height:t.getHeight+"px",right:"-"+t.getWidth/2+"px",top:"-"+t.getHeight/2+"px",borderRadius:t.getWidth+"px"}},[t.showNum?n("span",{style:{width:t.getWidth+"px",height:t.getHeight+"px",lineHeight:t.getHeight+"px",transformOrigin:t.getWidth/2+"px "+t.getHeight/2+"px"}},[t._v(" "+t._s(t.getShowNum))]):t._e()])},a=[],s=(n("a9e3"),{model:{prop:"checked",event:"change"},props:{width:{type:Number,default:16},height:{type:Number,default:16},count:{type:Number,default:null},overflowCount:{type:Number,default:99},showNum:{type:Boolean,default:!0}},computed:{getWidth:function(){if(!this.showNum)return 10;var t=this.width;return this.count>9&&this.count<100&&(t+=4),this.count>99&&(t+=8),t},getHeight:function(){return this.showNum?this.height:10},getShowNum:function(){return this.count>this.overflowCount?this.overflowCount+"+":this.count}}}),r=s,c=(n("8935"),n("2877")),o=Object(c["a"])(r,i,a,!1,null,"56013c3e",null);e["a"]=o.exports}}]);