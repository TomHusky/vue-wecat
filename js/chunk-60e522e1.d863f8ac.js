(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60e522e1"],{"0845":function(t,e,s){},"0d58":function(t,e,s){"use strict";s("0da9")},"0da9":function(t,e,s){},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"168e":function(t,e,s){},"1e2c":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-list-wrapper"},[s("div",{staticClass:"search-list"},[s("i",{staticClass:"icon iconfont icon-search",class:{"icon-search-color":t.searchIconColor}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"searchInput",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.search},on:{focus:t.inputFocus,blur:t.inputBlur,keyup:t.change,input:function(e){e.target.composing||(t.search=e.target.value)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showDelete,expression:"showDelete"}],staticClass:"searchInput-delete",on:{mousedown:t.del}})]),s("div",{staticClass:"add",on:{click:function(e){return t.$emit("add")}}},[s("i",{staticClass:"icon iconfont icon-add"})])])},n=[],a=(s("ac1f"),s("841c"),{props:["placeholder"],methods:{change:function(){this.$store.dispatch("system/search",this.search)},inputFocus:function(t){t.target.placeholder="",this.searchIconColor=!0,this.showDelete=!0},inputBlur:function(t){t.target.placeholder="搜索",this.searchIconColor=!1,this.showDelete=!1},del:function(t){this.search="",this.change()}},data:function(){return{search:"",active:!1,searchIconColor:!1,showDelete:!1}},computed:{}}),c=a,r=(s("c61c"),s("2877")),o=Object(r["a"])(c,i,n,!1,null,"30156624",null);e["a"]=o.exports},"2d85":function(t,e,s){},3432:function(t,e,s){"use strict";s("168e")},"380d":function(t,e,s){},"47e6":function(t,e,s){"use strict";s("2d85")},4882:function(t,e,s){"use strict";s("f59b")},"49d3":function(t,e,s){},5530:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("b64b"),s("a4d3"),s("4de4"),s("e439"),s("159b"),s("dbb4");var i=s("ade3");function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function a(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}},"59c8":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("div",{staticClass:"msglist"},[s("SearchList",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{placeholder:t.placeholder}}),s("ChatList")],1),s("div",{staticClass:"chatbox"},[s("MessageChat",{staticClass:"message"}),s("VText",{staticClass:"text"})],1),t.isShow?s("div",{staticClass:"chatInfo"},[1==t.selectedChat.type?s("FriendChatInfo",{attrs:{id:"info"}}):t._e(),2==t.selectedChat.type?s("GroupChatInfo",{attrs:{id:"info"}}):t._e()],1):t._e()])},n=[],a=s("5530"),c=s("1e2c"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"msglist selectNone"},[s("ul",[t._l(t.searchedChatlist,(function(e){return[e.isShow?s("li",{key:e.id,staticClass:"sessionlist",class:{active:e.wxid===t.selectWxid},on:{contextmenu:function(s){return s.preventDefault(),t.openMenu(s,e)},click:function(s){return t.selectSession(e.wxid)}}},[s("div",{staticClass:"list-left"},[s("img",{staticClass:"avatar",attrs:{width:"40",height:"40",alt:""===e.info.remark?e.info.nickname:e.info.remark,src:e.info.avatar}}),e.newMsgNum>0?s("Badge",{attrs:{count:e.newMsgNum,overflowCount:99,showNum:!e.info.notDisturb,width:16,height:16}}):t._e()],1),s("div",{staticClass:"list-right"},[s("p",{staticClass:"name"},[t._v(" "+t._s(""===e.info.remark?e.info.nickname:e.info.remark)+" ")]),s("span",{staticClass:"time"},[t._v(t._s(t._f("time")(e.messages[e.messages.length-1].date)))]),s("p",{staticClass:"lastmsg",domProps:{innerHTML:t._s(t.replaceFace(e.messages[e.messages.length-1].content))}})])]):t._e()]}))],2),s("context-menu",{staticClass:"right-menu",attrs:{offset:t.menuOffset},scopedSlots:t._u([{key:"menuItem",fn:function(){return[s("ul",[s("li",{on:{click:t.top}},[t._v("置顶")]),0==t.currentChat.newMsgNum?s("li",{on:{click:function(e){return t.updateMsgStatus(!1)}}},[t._v(" 标记为未读 ")]):t._e(),t.currentChat.newMsgNum>0?s("li",{on:{click:function(e){return t.updateMsgStatus(!0)}}},[t._v(" 标记为已读 ")]):t._e(),t.currentChat.info.notDisturb?t._e():s("li",{on:{click:function(e){return t.setNotDisturb(!0)}}},[t._v(" 消息免打扰 ")]),t.currentChat.info.notDisturb?s("li",{on:{click:function(e){return t.setNotDisturb(!1)}}},[t._v(" 开启新消息提醒 ")]):t._e(),s("li",{staticClass:"border-top",on:{click:t.closeChat}},[t._v("不显示聊天")]),s("li",{on:{click:t.deleteChat}},[t._v("删除聊天")])])]},proxy:!0}])})],1)},o=[],l=(s("caad"),s("2532"),s("ac1f"),s("5319"),s("ff9f")),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:t.left+"px",top:t.top+"px"}},[t._t("menuItem")],2)},u=[],d={name:"ContextMenu",props:{offset:{type:Object,default:function(){return{offsetLeft:0,offsetWidth:0,clientX:0,clientY:0}}}},data:function(){return{left:0,top:0,visible:!1}},watch:{offset:{handler:function(){var t=this.offset,e=(t.offsetLeft,t.offsetWidth,t.clientX),s=t.clientY;this.left=e,this.top=s,this.visible=!0},deep:!0},visible:function(t){t?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},methods:{closeMenu:function(){this.visible=!1}}},f=d,m=(s("66f4"),s("2877")),p=Object(m["a"])(f,h,u,!1,null,"63730e7f",null),v=p.exports,g=s("2f62"),C={components:{ContextMenu:v,Badge:l["a"]},data:function(){return{menuOffset:{offsetLeft:0,offsetWidth:0,clientX:0,clientY:0},currentChat:{info:{}}}},computed:Object(a["a"])(Object(a["a"])({},Object(g["d"])({emojis:function(t){return t.system.emojis},selectWxid:function(t){return t.chat.selectWxid},searchText:function(t){return t.system.searchText}})),Object(g["c"])({searchedChatlist:"chat/searchedChatlist",getChatIndex:"chat/getChatIndex"})),methods:Object(a["a"])(Object(a["a"])({},Object(g["b"])({selectSession:"chat/selectSession",updateChatInfo:"chat/updateChatInfo",topChat:"chat/topChat",deleteChatByWxid:"chat/deleteChatByWxid"})),{},{replaceFace:function(t){if(t.includes("@::tt;;@")){for(var e=this.emojis,s=0;s<e.length;s++)t=t.replace(e[s].reg,'<img src="static/emoji/'+e[s].file+'"  alt="" style="vertical-align: middle; width: 15px; height: 15px" />');return t}return t},openMenu:function(t,e){this.menuOffset.offsetLeft=this.$el.getBoundingClientRect().left,this.menuOffset.offsetWidth=this.$el.offsetWidth,this.menuOffset.clientX=t.clientX,this.menuOffset.clientY=t.clientY,this.currentChat=e},top:function(){this.topChat(this.currentChat)},updateMsgStatus:function(t){this.currentChat.newMsgNum=t?0:1,this.updateChatInfo(this.currentChat)},setNotDisturb:function(t){this.currentChat.info.notDisturb=t,this.updateChatInfo(this.currentChat)},closeChat:function(){if("wx001"!==this.currentChat.wxid){if(!(this.$store.state.chat.chatlist.length<2)){var t=this.getChatIndex(this.currentChat.wxid);this.currentChat.isShow=!1,this.updateChatInfo(this.currentChat),this.currentChat.wxid===this.selectWxid&&this.selectSession(this.$store.state.chat.chatlist[t].wxid)}}else this.$message({content:"机器人不能隐藏哦！",time:2500,type:"warning",hasClose:!0})},deleteChat:function(){"wx001"!==this.currentChat.wxid?this.deleteChatByWxid(this.currentChat.wxid):this.$message({content:"机器人不能删除哦！",time:2500,type:"warning",hasClose:!0})}}),filters:{time:function(t){return"string"===typeof t&&(t=new Date(t)),t.getMinutes()<10?t.getHours()+":0"+t.getMinutes():t.getHours()+":"+t.getMinutes()}}},w=C,b=(s("f415"),Object(m["a"])(w,r,o,!1,null,"7e8c42d0",null)),x=b.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info selectNone"},[s("div",{staticClass:"content scrollbar"},[s("div",{staticClass:"chatUserList"},[t._m(0),s("div",{staticClass:"userHead"},[s("img",{staticClass:"avatar",attrs:{width:"35",height:"35",alt:t.selectedFriend.nickname,src:t.selectedFriend.avatar},on:{click:t.openMenu}}),null==t.selectedFriend.remark?s("div",{staticClass:"name"},[t._v(" "+t._s(t.selectedFriend.nickname)+" ")]):t._e(),null!=t.selectedFriend.remark?s("div",{staticClass:"name"},[t._v(" "+t._s(t.selectedFriend.remark)+" ")]):t._e()])]),s("div",{staticClass:"division"}),s("div",{staticClass:"chatItem"},[s("div",{staticClass:"item chatSwitchItem"},[s("p",{staticClass:"switchLable"},[t._v("消息免打扰")]),s("p",{staticClass:"switchValue"},[s("switched",{attrs:{checked:t.selectedChat.info.notDisturb,width:40,height:18},on:{change:t.setNotDisturb}})],1)]),s("div",{staticClass:"item chatSwitchItem"},[s("p",{staticClass:"switchLable"},[t._v("置顶聊天")]),s("p",{staticClass:"switchValue"},[s("Switched",{attrs:{width:40,height:18},on:{change:t.toppingChat}})],1)])])])])},_=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"userHead"},[s("div",{staticClass:"add"},[s("img",{attrs:{alt:"添加",width:"15px",src:"static/images/icon/add.svg"}})]),s("div",{staticClass:"name"},[t._v("添加")])])}],y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"switch",style:{width:t.width+"px",height:t.height+"px"}},[s("input",{style:{width:t.width+"px",height:t.height+"px"},attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}}),s("span",{style:{borderRadius:t.height+"px"}},[s("i",{style:{width:t.height-8+"px",height:t.height-8+"px",marginTop:-(t.height-8)/2+"px"}})])])},O=[],k=(s("a9e3"),{model:{prop:"checked",event:"change"},props:{checked:{type:Boolean,default:!1},width:{type:Number,default:44},height:{type:Number,default:22}}}),I=k,S=(s("0d58"),Object(m["a"])(I,y,O,!1,null,"4dada1c4",null)),$=S.exports,M={components:{Switched:$},data:function(){return{}},created:function(){var t=this;document.addEventListener("click",(function(e){null!=t.$refs.info&&(t.$refs.info.contains(e.target)||t.isShow&&(t.isShow=!1))}))},computed:Object(a["a"])(Object(a["a"])({},Object(g["d"])({selectWxid:function(t){return t.chat.selectWxid},searchText:function(t){return t.system.searchText}})),Object(g["c"])({selectedFriend:"friend/selectedFriend",selectedChat:"chat/selectedChat"})),methods:Object(a["a"])(Object(a["a"])({},Object(g["b"])({updateChatInfo:"chat/updateChatInfo",topChat:"chat/topChat"})),{},{toppingChat:function(t){t&&this.topChat(this.selectedChat)},setNotDisturb:function(t){var e=this.selectedChat;e.info.notDisturb=t,this.updateChatInfo(e)},openMenu:function(t){var e={clientX:t.clientX,clientY:t.clientY,self:!1,visible:!0,visibleIng:!0,wxid:this.selectedFriend.wxid};this.$store.commit("system/setHeadMenu",e)}})},E=M,N=(s("3432"),Object(m["a"])(E,j,_,!1,null,"25a88936",null)),D=N.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info selectNone"},[s("div",{staticClass:"header"},[s("SearchList",{attrs:{placeholder:t.placeholder}})],1),s("div",{staticClass:"content scrollbar"},[s("div",{staticClass:"chatUserList"},t._l(t.searchedFriendlist,(function(e){return s("div",{key:e.id,staticClass:"userHead"},[s("img",{staticClass:"avatar",attrs:{width:"35",height:"35",alt:e.nickname,src:e.avatar}}),null==e.remark?s("div",{staticClass:"name"},[t._v(t._s(e.nickname))]):t._e(),null!=e.remark?s("div",{staticClass:"name"},[t._v(t._s(e.remark))]):t._e()])})),0),s("div",{staticClass:"division"}),t._m(0),s("div",{staticClass:"division"}),s("div",{staticClass:"chatItem"},[s("div",{staticClass:"item chatSwitchItem"},[s("p",{staticClass:"switchLable"},[t._v("显示群成员昵称")]),s("p",{staticClass:"switchValue"},[s("Switched",{attrs:{width:40,height:18}})],1)]),s("div",{staticClass:"item chatSwitchItem"},[s("p",{staticClass:"switchLable"},[t._v("消息免打扰")]),s("p",{staticClass:"switchValue"},[s("Switched",{attrs:{width:40,height:18}})],1)]),s("div",{staticClass:"item chatSwitchItem"},[s("p",{staticClass:"switchLable"},[t._v("置顶聊天")]),s("p",{staticClass:"switchValue"},[s("Switched",{attrs:{width:40,height:18}})],1)]),s("div",{staticClass:"item chatSwitchItem"},[s("p",{staticClass:"switchLable"},[t._v("保存到通讯录")]),s("p",{staticClass:"switchValue"},[s("Switched",{attrs:{width:40,height:18}})],1)])]),s("div",{staticClass:"division"}),t._m(1)])])},L=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chatItem"},[s("div",{staticClass:"item"},[s("p",{staticClass:"lable"},[t._v("群聊名称")]),s("p",{staticClass:"value"},[t._v("测试群")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"lable"},[t._v("群公告")]),s("p",{staticClass:"value"},[t._v("未设置")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"lable"},[t._v("备注")]),s("p",{staticClass:"value"},[t._v("it测试群")])]),s("div",{staticClass:"item"},[s("p",{staticClass:"lable"},[t._v("我在本群的昵称")]),s("p",{staticClass:"value"},[t._v("只有自己可见")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"exit"},[s("p",[t._v("删除并退出")])])}],H={components:{SearchList:c["a"],Switched:$},data:function(){return{placeholder:"搜索群好友"}},created:function(){var t=this;document.addEventListener("click",(function(e){null!=t.$refs.info&&(t.$refs.info.contains(e.target)||t.isShow&&(t.isShow=!1))}))},computed:Object(a["a"])(Object(a["a"])({},Object(g["d"])({selectWxid:function(t){return t.chat.selectWxid},searchText:function(t){return t.system.searchText}})),Object(g["c"])({searchedFriendlist:"friend/searchedFriendlist"})),methods:{}},F=H,W=(s("92e0"),Object(m["a"])(F,T,L,!1,null,"1e4bbe69",null)),P=W.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[1===t.selectedChat.type?[s("FriendMessage")]:t._e(),2===t.selectedChat.type?[s("GroupMessage")]:t._e()],2)},X=[],Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("header",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"header selectNone"},[s("div",{staticClass:"friendName"},[s("span",{staticStyle:{cursor:"pointer"},on:{click:t.showChatInfo}},[t._v(t._s(t.selectedChat.info.nickname))]),s("i",{staticClass:"icon iconfont icon-more info",staticStyle:{cursor:"pointer"},on:{click:t.showChatInfo}})])]),s("div",{ref:"list",staticClass:"message-wrapper"},[t.selectedChat?s("ul",t._l(t.selectedChat.messages,(function(e){return s("li",{staticClass:"message-item"},[s("div",{staticClass:"time"},[e.showTime?s("span",[t._v(t._s(t._f("time")(e.date)))]):t._e()]),s("div",{staticClass:"main",class:{self:e.self}},[s("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:e.self?t.user.avatar:t.selectedChat.info.avatar}}),s("div",{staticClass:"content"},[s("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})])])])})),0):t._e()])])},V=[],R=(s("6f36"),{computed:Object(a["a"])(Object(a["a"])({},Object(g["c"])({selectedChat:"chat/selectedChat",messages:"chat/messages"})),Object(g["d"])({user:function(t){return store.state.user.info},emojis:function(t){return t.system.emojis}})),mounted:function(){var t=this;setTimeout((function(){return t.$refs.list.scrollTop=t.$refs.list.scrollHeight}),0)},created:function(){},watch:{messages:function(){var t=this;setTimeout((function(){return t.$refs.list.scrollTop=t.$refs.list.scrollHeight}),0)}},methods:{showChatInfo:function(){this.$parent.showChatInfo()},replaceFace:function(t){if(t.includes("@::tt;;@")){for(var e=this.emojis,s=0;s<e.length;s++)t=t.replace(e[s].reg,'<img src="static/emoji/'+e[s].file+'"  alt="" style="vertical-align: middle; width: 24px; height: 24px" />');return t}return t}},filters:{time:function(t){return"string"===typeof t&&(t=new Date(t)),t.getMinutes()<10?t.getHours()+":0"+t.getMinutes():t.getHours()+":"+t.getMinutes()}}}),q=R,G=(s("4882"),Object(m["a"])(q,Y,V,!1,null,"81237646",null)),z=G.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message"},[s("header",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"header selectNone"},[s("div",{staticClass:"friendName"},[s("span",{staticStyle:{cursor:"pointer"},on:{click:t.showChatInfo}},[t._v(t._s(""===t.selectedChat.info.remark?t.selectedChat.info.nickname:t.selectedChat.info.remark))])]),s("i",{staticClass:"icon iconfont icon-more info",staticStyle:{cursor:"pointer"},on:{click:t.showChatInfo}})]),s("div",{ref:"list",staticClass:"message-wrapper"},[t.selectedChat?s("ul",t._l(t.selectedChat.messages,(function(e,i){return s("li",{key:e.id,staticClass:"message-item"},[s("div",{staticClass:"time selectNone"},[e.showTime?s("span",[t._v(t._s(t._f("time")(e.date)))]):t._e()]),s("div",{staticClass:"main",class:{self:e.self}},[s("img",{staticClass:"avatar selectNone",attrs:{width:"36",height:"36",src:e.self?t.user.avatar:t.selectedChat.info.avatar},on:{click:function(s){return s.preventDefault(),t.openMenu(s,e)}}}),s("div",{staticClass:"content"},[s("div",{staticClass:"text",domProps:{innerHTML:t._s(t.replaceFace(e.content))}})])])])})),0):t._e()])])},U=[],A={computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(g["c"])({selectedChat:"chat/selectedChat",messages:"chat/messages",selectedChatFriend:"friend/selectedChatFriend"})),Object(g["d"])({emojis:function(t){return t.system.emojis}})),{},{user:function(){var t=this.$store.state.user.info;return t.self=!0,t}}),data:function(){return{}},mounted:function(){var t=this;setTimeout((function(){return t.$refs.list.scrollTop=t.$refs.list.scrollHeight}),0)},created:function(){},watch:{messages:function(){var t=this;setTimeout((function(){return t.$refs.list.scrollTop=t.$refs.list.scrollHeight}),0)}},methods:{openMenu:function(t,e){var s={clientX:t.clientX,clientY:t.clientY,self:e.self,visible:!0,visibleIng:!0,wxid:this.selectedChat.wxid};this.$store.commit("system/setHeadMenu",s)},showChatInfo:function(){this.$parent.showChatInfo()},replaceFace:function(t){if(t.includes("@::tt;;@")){for(var e=this.emojis,s=0;s<e.length;s++)t=t.replace(e[s].reg,'<img src="static/emoji/'+e[s].file+'"  alt="" style="vertical-align: middle; width: 24px; height: 24px" />');return t}return t}},filters:{time:function(t){return"string"===typeof t&&(t=new Date(t)),t.getMinutes()<10?t.getHours()+":0"+t.getMinutes():t.getHours()+":"+t.getMinutes()}}},K=A,Q=(s("88ae"),Object(m["a"])(K,J,U,!1,null,"028b2cde",null)),Z=Q.exports,tt={components:{GroupMessage:z,FriendMessage:Z},computed:Object(a["a"])({},Object(g["c"])({selectedChat:"chat/selectedChat"})),methods:{showChatInfo:function(){this.$parent.showChatInfo(!0)}},filters:{time:function(t){return"string"===typeof t&&(t=new Date(t)),t.getMinutes()<10?t.getHours()+":0"+t.getMinutes():t.getHours()+":"+t.getMinutes()}}},et=tt,st=Object(m["a"])(et,B,X,!1,null,"0755bdb1",null),it=st.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text"},[s("div",{staticClass:"emoji"},[s("i",{ref:"emoji",staticClass:"icon iconfont icon-look",on:{click:t.showEmojiList}}),s("transition",{attrs:{name:"showbox"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showEmoji,expression:"showEmoji"}],staticClass:"emojiBox"},t._l(t.emojis,(function(e){return s("li",{key:e.id},[s("img",{attrs:{src:"static/emoji/"+e.file,data:e.code},on:{click:function(s){return t.choiceEmoji(e)}}})])})),0)])],1),s("div",{ref:"text",attrs:{id:"textarea",contenteditable:"true"},on:{input:t.textareaInput,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onkeydown(e)},paste:t.clearCss}}),s("div",{staticClass:"send",on:{click:t.send}},[s("span",[t._v("发送(ent)")])]),s("transition",{attrs:{name:"appear"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.warn,expression:"warn"}],staticClass:"warn"},[s("div",{staticClass:"description"},[t._v("不能发送空白信息")])])])],1)},at=[];s("a4d3"),s("e01a"),s("d3b7"),s("d28b"),s("3ca3"),s("ddb0");function ct(t){return ct="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}s("d81d"),s("4de4"),s("4d63"),s("25f0"),s("466d"),s("b0c0");var rt={data:function(){return{originalConent:[],content:"",reply:"未找到",frequency:0,warn:!1,showEmoji:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(g["d"])({selectWxid:function(t){return t.chat.selectWxid},emojis:function(t){return t.system.emojis}})),Object(g["c"])({selectedChat:"chat/selectedChat"})),created:function(){var t=this;document.addEventListener("click",(function(e){null!=t.$refs.emoji&&(t.$refs.emoji.contains(e.target)||t.showEmoji&&(t.showEmoji=!1))}))},methods:{clearCss:function(t){t.stopPropagation(),t.preventDefault();var e="",s=t.originalEvent||t;s.clipboardData&&s.clipboardData.getData?e=s.clipboardData.getData("text/plain"):window.clipboardData&&window.clipboardData.getData&&(e=window.clipboardData.getData("Text")),document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,e):document.execCommand("paste",!1,e)},textareaInput:function(t){},showEmojiList:function(){this.showEmoji=!0},choiceEmoji:function(t){this.showEmoji=!1;var e=this.$refs.text,s=e.innerHTML;if(this.emojiNumIsOut(s))alert("表情数量不允许超过5个");else{s+=t.sign;var i=this.replaceEmoji(s);e.innerHTML=i}},replaceEmoji:function(t){if(t.includes("@::tt;;@")){for(var e=this.emojis,s=0;s<e.length;s++)t=t.replace(e[s].reg,'<img lwj="" wx="'+e[s].id+'" src="static/emoji/'+e[s].file+'" style="vertical-align: middle; width: 24px; height: 24px" jwl=""/>');return t}return t},replaceEmojiToCode:function(t){var e=this;if(t.includes("<img lwj")){var s=function(){var s=/\<img lwj=\"\" wx=\"[\s\S]*\" src=\"static\/emoji\/[\s\S]*\.gif\" style=\"vertical-align: middle; width: 24px; height: 24px\" jwl=\"\"\>/g,i=e;while(t.includes("<img lwj")){var n="",a="",c="";t.replace(s,(function(e,s,r){var o=t.substring(s+16,s+16+32);n=o,i.emojis.filter((function(t){return t.id===o})).map((function(t){a=t.file,c=t.sign}))}));var r=e.getEmojiSignReg(n,a);t=t.replace(r,c)}return{v:t}}();if("object"===ct(s))return s.v}return t},getEmojiSignReg:function(t,e){var s=e.substring(0,e.indexOf("."));return new RegExp('\\<img lwj=\\"\\" wx=\\"'+t+'\\" src=\\"static\\/emoji\\/'+s+'\\.gif\\" style=\\"vertical-align: middle; width: 24px; height: 24px\\" jwl=\\"\\"\\>',"g")},emojiNumIsOut:function(t){var e=/\<img lwj=\"\" wx=\"[a-z0-9]{32}\"/g,s=t.match(e);return!!(s&&s.length>=5)},onkeydown:function(t){t.ctrlKey&&13==t.keyCode||(this.send(),t.preventDefault())},send:function(){var t=this,e=this.$refs.text,s=e.innerHTML;if(this.emojiNumIsOut(s))alert("表情数量不允许超过5个");else{var i=this.replaceEmojiToCode(s);if(this.content=i,this.content.length<1)this.warn=!0,this.content="",setTimeout((function(){t.warn=!1}),1e3);else if("机器人"===this.selectedChat.info.name)this.$http.get("https://zhaoplus.com/api/AI?search=".concat(this.content)).then((function(s){t.reply=s.data.result.text,t.content.includes("/:")&&(t.reply="嘻嘻");var i={content:t.content,reply:t.reply};t.$store.dispatch("chat/sendMessage",i),t.content="",e.innerHTML=""}));else{var n={content:this.content};this.$store.dispatch("chat/sendMessage",n),this.content="",e.innerHTML=""}}}},mounted:function(){this.$refs.text.focus()},watch:{selectWxid:function(){var t=this;setTimeout((function(){t.$refs.text.focus()}),0)},content:function(){var t=this;""===this.content&&0===this.frequency&&(this.warn=!0,this.frequency++,setTimeout((function(){t.warn=!1}),1e3))}}},ot=rt,lt=(s("e355"),Object(m["a"])(ot,nt,at,!1,null,"21f441c0",null)),ht=lt.exports,ut={components:{SearchList:c["a"],ChatList:x,FriendChatInfo:D,GroupChatInfo:P,VText:ht,MessageChat:it},data:function(){return{isShow:!1,showIng:!1,placeholder:"搜索"}},computed:Object(a["a"])({},Object(g["c"])({selectedChat:"chat/selectedChat"})),created:function(){var t=this;document.addEventListener("click",(function(e){var s=document.getElementById("info");s&&(s.contains(e.target)||(t.showIng?t.showIng=!1:t.isShow=!1))}))},methods:{showChatInfo:function(t){this.showIng=t,this.isShow=!this.isShow}}},dt=ut,ft=(s("47e6"),Object(m["a"])(dt,i,n,!1,null,"04fd98d0",null));e["default"]=ft.exports},"66f4":function(t,e,s){"use strict";s("e734")},"841c":function(t,e,s){"use strict";var i=s("d784"),n=s("825a"),a=s("1d80"),c=s("129f"),r=s("577e"),o=s("dc4a"),l=s("14c3");i("search",(function(t,e,s){return[function(e){var s=a(this),i=void 0==e?void 0:o(e,t);return i?i.call(e,s):new RegExp(e)[t](r(s))},function(t){var i=n(this),a=r(t),o=s(e,i,a);if(o.done)return o.value;var h=i.lastIndex;c(h,0)||(i.lastIndex=0);var u=l(i,a);return c(i.lastIndex,h)||(i.lastIndex=h),null===u?-1:u.index}]}))},"88ae":function(t,e,s){"use strict";s("0845")},8935:function(t,e,s){"use strict";s("eacc")},"92e0":function(t,e,s){"use strict";s("49d3")},bcd5:function(t,e,s){},bee1:function(t,e,s){},c61c:function(t,e,s){"use strict";s("bcd5")},dbb4:function(t,e,s){var i=s("23e7"),n=s("83ab"),a=s("56ef"),c=s("fc6a"),r=s("06cf"),o=s("8418");i({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,s,i=c(t),n=r.f,l=a(i),h={},u=0;while(l.length>u)s=n(i,e=l[u++]),void 0!==s&&o(h,e,s);return h}})},e355:function(t,e,s){"use strict";s("380d")},e439:function(t,e,s){var i=s("23e7"),n=s("d039"),a=s("fc6a"),c=s("06cf").f,r=s("83ab"),o=n((function(){c(1)})),l=!r||o;i({target:"Object",stat:!0,forced:l,sham:!r},{getOwnPropertyDescriptor:function(t,e){return c(a(t),e)}})},e734:function(t,e,s){},eacc:function(t,e,s){},f415:function(t,e,s){"use strict";s("bee1")},f59b:function(t,e,s){},ff9f:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"badge",style:{width:t.getWidth+"px",height:t.getHeight+"px",right:"-"+t.getWidth/2+"px",top:"-"+t.getHeight/2+"px",borderRadius:t.getWidth+"px"}},[t.showNum?s("span",{style:{width:t.getWidth+"px",height:t.getHeight+"px",lineHeight:t.getHeight+"px",transformOrigin:t.getWidth/2+"px "+t.getHeight/2+"px"}},[t._v(" "+t._s(t.getShowNum))]):t._e()])},n=[],a=(s("a9e3"),{model:{prop:"checked",event:"change"},props:{width:{type:Number,default:16},height:{type:Number,default:16},count:{type:Number,default:null},overflowCount:{type:Number,default:99},showNum:{type:Boolean,default:!0}},computed:{getWidth:function(){if(!this.showNum)return 10;var t=this.width;return this.count>9&&this.count<100&&(t+=4),this.count>99&&(t+=8),t},getHeight:function(){return this.showNum?this.height:10},getShowNum:function(){return this.count>this.overflowCount?this.overflowCount+"+":this.count}}}),c=a,r=(s("8935"),s("2877")),o=Object(r["a"])(c,i,n,!1,null,"56013c3e",null);e["a"]=o.exports}}]);